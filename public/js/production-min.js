var rt={responseTimeRequestUrl:"/responseTime/",siteList:["hardgraft.com","theverge.com","retroduck.com","houseind.com"],colorIndex:["#97CA51","#97CA51","#A5BC4F","#D2C652","#D1AD52","#CD9654","#CB7255","#CC5A58","#B84445","#A33333","#772020"],MAX_RADIUS:100,ANIMATE_CIRCLE_DURATION:2e3,ANIMATE_CIRCLE_DELAY:100,init:function(e){for(var t=0;t<rt.siteList.length;t++){var s=rt.siteList[t];if(e){var r=s.replace(".","");$(".responseTimes").append($("<span>").attr("class","responseTimes--siteDetails").attr("id",r))}rt.loadResponseTime(s)}},loadResponseTime:function(e){var t=rt.responseTimeRequestUrl+e;$.ajax({url:t,success:function(e){rt.renderResponseTimeElement(e)},error:function(e){console.log("something is wrong with our server",e)}})},renderResponseTimeElement:function(e){var t=e.site.replace(".",""),s=$("#"+t);0==s.length?($(".responseTimes").append($("<span>").attr("class","responseTimes--siteDetails").attr("id",t)),rt.renderResponseTimeElement(e)):(rt.setSiteDetailsLabel(s,e),rt.createSvgCircleForResponseTime(t,e.response_time),rt.showResponseTimeAndLastUpdate(t,e.response_time))},setSiteDetailsLabel:function(e,t){e.html("").append($("<label>").attr("class","responseTimes--siteDetails__siteName").html(t.site))},createSvgCircleForResponseTime:function(e,t){var s=d3.select("#"+e).append("svg").attr("width",2*rt.MAX_RADIUS).attr("height",2*rt.MAX_RADIUS),r=s.append("circle").attr("cx",rt.MAX_RADIUS).attr("cy",rt.MAX_RADIUS).attr("r",2).attr("fill","#DCDCDC");rt.animateSvgCircle(r,t)},animateSvgCircle:function(e,t){var s=t/4;s=s>rt.MAX_RADIUS?rt.MAX_RADIUS:s;var r=parseInt(s/10),i=rt.colorIndex[r];e.transition().duration(rt.ANIMATE_CIRCLE_DURATION).delay(rt.ANIMATE_CIRCLE_DELAY).attr("r",s).attr("fill",i)},showResponseTimeAndLastUpdate:function(e,t){var s=t+" milliseconds";parseInt(t)>=1e3&&(s="more that 1 second"),s="Response: "+s;var r=String(new Date).split("GMT")[0],i="last updated "+r;$("#"+e).append($("<label>").attr("class","responseTimes--siteDetails__responseTime").html(s)).append($("<label>").attr("class","responseTimes--siteDetails__lastUpdate").html(i))}};rt.init(!0),setInterval(function(){rt.init()},6e4);